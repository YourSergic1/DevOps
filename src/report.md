## Part 1. Установка ОС
- Скачиваем и устанавливаем программу VirtualBox.
- Скачиваем и устанавливаем Ubuntu 20.04 Server LTS без графического интерфейса.
- Используем команду `cat /etc/issue` для просмотра версии.  
![Версия ОС](<screenshots/1.png>)

## Part 2. Создание пользователя
- Добавим нового пользователя в группу **adm** с помощью команды `sudo useradd -m -g adm SergeyBugrov`.  
![Создание пользователя](<screenshots/2.png>)
- Проверим создался ли новый пользователь с помощью команды `cat /etc/passwd`.  
![Вывод пользователей](<screenshots/3.png>)

## Part 3. Настройка сети ОС
- Установим имя машины как **user-1** с помощью команды `sudo hostnamectl set-hostname user-1`.  
![Установка имени машины](<screenshots/4.png>)  
 Проверим имя машины с помощью команды `hostname`.  
![Проверка имени машины](<screenshots/5.png>)
- Установим **Московскую** временную зону с помощью команды `sudo timedatectl set-timezone Europe/Moscow`.  
![Установка временной зоны](<screenshots/6.png>)  
 Проверим изменения временной зоны командой `timedatectl`.  
![Проверка временной зоны](<screenshots/7.png>)
- Для вывода название сетевых интерфейсов используем команду `ip -br link show`.  
![Вывод сетевых интерфейсов](<screenshots/8.png>)  
 **lo** - виртуальный интерфейс, присутствующий по умолчанию в любом Linux. Используется для отладки сетевых программ и запуска серверных приложений на локальной машине.
- Для получения ip адреса устройства от DHCP сервера используем команду `sudo dhclient -v enp0s3`.  
![Получение ip адреса устройства от DHCP сервера](<screenshots/9.png>)  
 **DHCP** (англ. Dynamic Host Configuration Protocol — протокол динамической настройки узла) — сетевой протокол, позволяющий компьютерам автоматически получать IP-адрес и другие параметры, необходимые для работы в сети.
- Для получения внешнего ip-адреса шлюза используем команду `wget -qO- ifconfig.m`.  
![Получение внешнего ip адреса устройства](<screenshots/10.png>)  
- Для получения внутреннего ip-адреса шлюза прописываем `hostname -I`.  
![Получение внутреннего ip адреса устройства](<screenshots/11.png>)
- Вручную задаем настройки ip, gw, dns. Для этого редактируем файл `/etc/netplan/00-installer-config.yaml` и перезагружаем машину командой `reboot`.  
![Вывод отредактированного файла настроек](<screenshots/12.png>)
- Пингуем удаленные хосты 1.1.1.1 и ya.ru при помощи команды `ping 1.1.1.1` и `ping ya.ru`.  
![Пингуем хосты](<screenshots/13.png>)

## Part 4. Настройка сети ОС
- Обновим все пакеты с помощью команды `sudo apt upgrade`.
- Полсе обновления введем команду `sudo apt upgrade` еще раз для проверки актуальных обновлений.
![Проверяем актуальные обновления](<screenshots/14.png>)

## Part 5. Использование команды sudo
- Основной способ повышать привилегии в современных системах — утилита **sudo** (substitute user and do — дословно «подменить пользователя и выполнить»).Использовать sudo очень просто, достаточно написать эту команду слева от любой другой и выполнить. По умолчанию она пытается повысить привилегии до суперпользователя.
- Разрешим пользователю, созданному во второй части использовать sudo с помощью команды `sudo usermod -a -G sudo SergeyBugrov`.  
![Даём право использовать sudo](<screenshots/15.png>)
- Теперь чтобы изменить hostname OC авторизуемся от имени созданного пользователя, но так как пароль для него мы еще не задавали сначала зададим пароль с помощью команды `sudo passwd SergeyBugrov`.  
![Задаём пароль для пользователя](<screenshots/16.png>)
- Проверим пользователя SergeyBugrov с помощью команды `sudo passwd -S SergeyBugrov`.  
![Задаём пароль для пользователя](<screenshots/17.png>)  
 Флажок P значит, что пароль установлен.  
- Теперь изменим hostname OC с помощью команды `sudo hostnamectl set-hostname user-2`.  
![Задаём hostname](<screenshots/18.png>)
- Перейдем к главному пользователю и проверим hostname.  
![Проверяем hostname](<screenshots/19.png>)

## Part 6. Установка и настройка службы времени
- Для синхронизации времени используем команду `sudo timedatectl set-ntp true`.  
![Синхронизация времени](<screenshots/20.png>)

## Part 7. Установка и использование текстовых редакторов 
- Для установки **vim**, **nano** и **joe** используем 3 команды соответственно `sudo apt install vim`, `sudo apt install nano`, `sudo apt install joe`.
- Создадим новый файл с помощью команды `vim test_vim.txt`. Нажмем клавишу **i** для ввода текста. Введем **titandea**. Нажмём **:** для выхода из режима редактирования. Введем `ZZ` для выхода из Vim с сохранением.  
![Никнейм в Vim](<screenshots/21.png>)
- Создадим новый файл с помощью команды `nano test_nano.txt`. Введем **titandea**. Нажмем **Ctrl + O** для сохранения изменений. Введем название файла и нажмем **Enter**. Выйдем из nano нажатием **Ctrl +  X**.  
![Никнейм в Nano](<screenshots/22.png>)
- Создадим новый файл с помощью комманды `joe test_joe.txt`. Введем **titandea**. Нажмем **Ctrl + KX** для выхода с cохранением изменений.  
![Никнейм в Joe](<screenshots/23.png>)  
-Откроем файл с помощью команды `vim test_vim.txt`. Перейдем в начало строки и удалим строку с помощью команды `dd`. Нажмем клавишу **i** для ввода текста. Введем **21 School 21**. Нажмем **Esc** и нажмём **:** для выхода из режима редактирования. Введем `qa!` для выхода из Vim без сохранения.  
![21 School 21 в Vim](<screenshots/24.png>)
- Откроем файл с помощью команды `nano test_nano.txt`. Перейдем в начало строки и удалим строку с помощью команды **Ctrl +K**.Введем **21 School 21**. Нажмем **Ctrl +X** и введем `n` для выхода без сохранения.  
![21 School 21 в Nano](<screenshots/25.png>)
- Откроем файл с помощью комманды `joe test_joe.txt`. Перейдем в начало строки и удалим строку с помощью команды **Ctrl +Y**. Введем **21 School 21**. Нажмем **Ctrl +C** и введем `y` для выхода без сохранения.  
![21 School 21 в Joe](<screenshots/26.png>)
- Откроем файл с помощью команды `vim test_vim.txt`. Изменим файл. Для перехода в режим поиска введем `/` и искомое слово, в нашем случае это будет `/titandea`. Теперь, чтобы заменить слово, перейдем в командный режим и введем команду `:s/titandea/not_titandea/` и нажмем **Enter**. Выйдем без сохранения.  
![Поиск в Vim](<screenshots/27.png>)  
![Поиск и замена в Vim](<screenshots/28.png>)
- Откроем файл с помощью команды `nano test_nano.txt`. Изменим файл. Для перехода в режим поиска нажмем **Ctrl + W** и введем искомое слово, в нашем случае это будет `titandea`. Теперь, чтобы заменить слово, нажмем **Ctrl + \**, введем искомое слво `titandea` + **Enter**, введем слово на которое будем заменять `not_titandea` + **Enter**, введем `y`+ **Enter**. Выйдем без сохранения.  
![Поиск в Nano](<screenshots/29.png>)  
![Поиск и замена в Nano](<screenshots/30.png>)  
![Поиск и замена в Nano](<screenshots/31.png>)  
![Поиск и замена в Nano](<screenshots/32.png>)
- Откроем файл с помощью команды `joe test_joe.txt`.Изменим файл. Для перехода в режим поиска нажмем **Ctrl + KF** и введем искомое слово, в нашем случае это будет `titandea`, и после нажмем **Enter**. Теперь, чтобы заменить слово, нажмем **Ctrl + KF** и введем искомое слово, в нашем случае это будет `titandea` и после в параметрах введем `r` + **Enter**, далее введем слово на которое будем заменять `titandea` + **Enter** и подтвердим замену вводом `y` + **Enter**. Выйдем без сохранения.  
![Поиск в Joe](<screenshots/33.png>)  
![Поиск и замена в Joe](<screenshots/34.png>)  
![Поиск и замена в Joe](<screenshots/35.png>)  
![Поиск и замена в Joe](<screenshots/36.png>)  
![Поиск и замена в Joe](<screenshots/37.png>)

## Part 8. Установка и базовая настройка сервиса **SSHD**
- Чтобы установить сервис **SSHD** пропишем команду `sudo apt install ssh`.  
![Скачивание сервиса SSHD](<screenshots/38.png>)  
- Добавим автостарт сервиса с помощью команды `sudo systemctl enable ssh`.  
![Автостарт сервиса SSHD](<screenshots/39.png>)
- Чтобы перенастроить службу **SSHD** на порт 2022, необходимо изменить значение порта в файле **sshd_config**. Для этого используем vim: `sudo vim /etc/ssh/sshd_config`. Далее перезагружаем службу командой `systemctl restart sshd`.  
![Изменение порта SSHD](<screenshots/40.png>)  
![Изменение порта SSHD](<screenshots/41.png>)  
- Проверим наличие процесса ssh введя команду `ps -C sshd` .Ключ **-C** фильтрует процессы по указанной строке.  
![Проверка наличия процесса SSHD](<screenshots/42.png>)  
- Перезагрузим систему.  
- Скачаем пакет **net-tools** для вызова команды netstat с помощью команды `sudo apt install net-tools`.  
![Скачивание пакета net-tools](<screenshots/43.png>)  
- Введем команду `netstat -tan`.  
![Вывод команды netstat -tan](<screenshots/44.png>)
    - `-t` - отображение текущего подключения в состоянии переноса нагрузки с процессора на сетевой адаптер при передаче данных
    - `-a` - выводит информацию о всех сокетах(об активных которые слушают порты и неактивных, которые не слушают).
    -  `-n` - отображает адреса и номера портов в числовом формате
- **Proto** - протокол (tcp, udp, raw), используемый сокетом
  **Recv-Q** - cчётчик байт не скопированных программой пользователя из этого сокета
  **Send-Q** - cчётчик байтов, не подтверждённых удалённым узлом
  **Local Address** - адрес и номер порта локального конца сокета
  **Foreign Address** -адрес и номер порта удалённого конца сокета
  **State** - cостояние сокета
  **Значение 0.0.0.0** - любой адрес
  
## Part 9. Установка и использование утилит **top**, **htop**
- Вывод команды `top`:  
![Вывод команды top](<screenshots/45.png>)  
![Вывод команды top](<screenshots/46.png>)  
![Вывод команды top](<screenshots/47.png>)  
    - uptime - 24 минуты
    - количество авторизированных пользователей - 1
    - общая загрузка системы 0.0, 0.00, 0.00
    - общее количество процессов - 95
    - загрузка cpu - 0.0
    - загрузка памяти - 149.1 Mib
    - pid процесса занимающего больше всего памяти - 555
    - pid процесса, занимающего больше всего процессорного времени - 1405
- Вывод команды `htop`:  
    - Отсортированный по **PID**  
    ![PID](<screenshots/48.png>)  
    - Отсортированный по **PERCENT_CPU**  
    ![PERCENT_CPU](<screenshots/49.png>)  
    - Отсортированный по **PERCENT_MEM**  
    ![PERCENT_MEM](<screenshots/50.png>)  
    - Отсортированный по **TIME**  
    ![TIME](<screenshots/51.png>)  
    - Отфильтрованный для процесса **sshd**  
    ![sshd](<screenshots/52.png>)  
    - Процесс **syslog**, найденный при помощи поиска  
    ![syslog](<screenshots/53.png>)  
    - С добавлением **hostname**, **clock**, **uptime**  
    ![hostname, clock, uptime](<screenshots/54.png>)  

## Part 10. Использование утилиты **fdisk**
- Вывод команды `sudo fdisk -l`.  
![sudo fdisk -l](<screenshots/55.png>)  
- Название диска - sda.
- Размер диска - 40 GiB.
- Количество секторов - 83886080.
- Вывод команды `swapon --show`.  
![swapon --show](<screenshots/56.png>)  
  Размер swap - 3.9G.

## Part 11. Использование утилиты **df** 
- Вывод команды `df /`.  
![df /](<screenshots/57.png>)    
    - Размер раздела:  19430032 KiB.
    - Размер занятого пространства: 6919764 KiB.
    - Размер свободного пространства: 11497944 KiB.
    - Процент использования: 38%.
    - 1K-block – Размер раздела в блоках по 1 килобайту.
- Вывод команды `df -Th`.  
![df -Th /](<screenshots/58.png>)
    - Размер раздела: 19G.
    - Размер занятого пространства: 6.6G.
    - Размер свободного пространства: 11G.
    - Процент использования: 38%.
    - Тип файловой системы для раздела: ext4.

## Part 12. Использование утилиты **du**
- Вывод команды `du`.  
![du](<screenshots/59.png>) 
- Вывод размера папок **/home**, **/var**, **/var/log** с помощью команды `du -hbs /home`, `sudo du -hbs /var`, `sudo du -hbs /var/log`.  
![/home, /var, /var/log](<screenshots/60.png>)  
    -`h` - выводит размер в единицах измерения удобных для человека.
    -`b` - выводит размер в байтах.
    -`s` - выводит только общий размер. 
- Вывод размера всего содержимого в /var/log с помощью команды `sudo du -hbs /var/log/*`.  
![/var/log/*](<screenshots/61.png>)  

## Part 13. Установка и использование утилиты **ncdu**
- Установим утилиту **ncdu** с помощью команды `sudo apt install ncdu`.  
- Просканируем пространство диска с помощью команды `sudo ncdu /`.  
    - **/home/**  
    ![/home/](<screenshots/62.png>)
    - **/var/**  
    ![/var/](<screenshots/63.png>)
    - **/var/log/**   
    ![/var/log/](<screenshots/64.png>)

## Part 14. Работа с системными журналами
- Просмотрим 3 log файла: **/var/log/dmesg**, **/var/log/syslog**, **/var/log/auth.log**.   
- Найдем последнюю успешную авторизацию.  
![Авторизация](<screenshots/65.png>)
    - Время последней успешной авторизации: 18 февраля в 13:33:19.
    - Имя пользователя: titandea.
    - Метод входа в систему: login.
- Найдем запись о перезапуск служб SSHd.  
![SSHd](<screenshots/66.png>)

## Part 15. Использование планировщика заданий **CRON**
- Откроем файл **CRON** и добавим туда комманду на запуск команды `uptime` каждые две минуты.  
![uptime](<screenshots/67.png>)  
- Выведем список текущих заданий для **CRON** с помощью команды `crontab -l`.  
![crontab -l](<screenshots/68.png>)  
- Удалили все задания из планировщика заданий и выведем список текущих заданий для **CRON** с помощью команды `crontab -l`.
![crontab -l](<screenshots/69.png>)
